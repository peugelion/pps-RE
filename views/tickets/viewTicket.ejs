<!DOCTYPE html>
<html>
  <head>
    <!-- Standard Meta -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/assets/css/semantic.min.css">
    <script type="text/javascript" src="/assets/js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="/assets/js/semantic.min.js"></script>
    
  </head>
  <body>
    <div class="ui main container">
      <div class="ui page">
        <form class="ui form" id="theForm">
          <div class="fields">
            <div class="two wide field"></div>
            <div class="two wide field">
              <label>Broj</label>
              <input type="text" name="ticketNum" placeholder="Autogenerisan" readonly="readonly" value="<%= ticketRecord.Broj %>">
            </div>
            <div class="three wide field">
              <label>Datum</label>
              <input type="text" value="<%= ticketRecord.Datum %>" readonly="readonly">
            </div>
            <div class="seven wide field">
              <label>Poslovni Partner</label>
              <input type="text" name="ticketPP" placeholder="Partner" readonly="readonly" value="<%= ticketRecord.Naziv %>">
            </div>
            <div class="two wide field"></div>
          </div>
          <div class="fields">
            <div class="two wide field"></div>
            <div class="four wide field">
              <label>Tip prijave</label>
              <select name="ticketType" id="ticketType" class="ui fluid dropdown">
                <% for(option of selectOptions) { %>
                  <% if(option.StaticnaTabela === 417 && option.Pk_Id === ticketRecord.Fk_St_417) { %>
                    <option value="<%= option.Pk_Id %>" selected><%= option.Naziv_Stavke %></option>
                  <% } else if(option.StaticnaTabela === 417) { %>
                    <option value="<%= option.Pk_Id %>"><%= option.Naziv_Stavke %></option>
                  <% } %>
                <% } %>
              </select>
            </div>
            <div class="four wide field">
              <label>Prioritet</label>
              <select name="ticketPriority" id="ticketPriority" class="ui fluid dropdown">
                <% for(option of selectOptions) { %>
                  <% if(option.StaticnaTabela === 418 && option.Pk_Id === ticketRecord.Fk_St_418) { %>
                    <option value="<%= option.Pk_Id %>" selected><%= option.Naziv_Stavke %></option>
                  <% } else if(option.StaticnaTabela === 418) { %>
                    <option value="<%= option.Pk_Id %>"><%= option.Naziv_Stavke %></option>
                  <% } %>
                <% } %>
              </select>
            </div>
            <div class="four wide field">
              <label>Status</label>
              <select name="ticketStatus" id="ticketStatus" class="ui fluid dropdown">
                <% for(option of selectOptions) { %>
                  <% if(option.StaticnaTabela === 419 && option.Pk_Id === ticketRecord.Fk_St_419) { %>
                    <option value="<%= option.Pk_Id %>" selected><%= option.Naziv_Stavke %></option>
                  <% } else if(option.StaticnaTabela === 419) { %>
                    <option value="<%= option.Pk_Id %>"><%= option.Naziv_Stavke %></option>
                  <% } %>
                <% } %>
              </select>
            </div>
            <div class="two wide field">
            </div>
          </div>
          <div class="fields">
            <div class="two wide field"></div>
            <div class="twelve wide field">
              <label>Referenca</label>
              <input type="text" name="referenca" placeholder="Maksimum 50 karaktera..." value="<%= ticketRecord.Referenca %>" readonly="readonly">
            </div>
            <div class="two wide field"></div>
          </div>
          <div class="fields">
            <div class="two wide field"></div>
            <div class="twelve wide field">
              <label>Opis prijave</label>
              <textarea name="ticketSubject" readonly="readonly"><%= ticketRecord.Subject %></textarea>
            </div>
            <div class="two wide field"></div>
          </div>
          <div class="fields">
            <div class="two wide field"></div>
            <div class="twelve wide field">
              <h5 class="ui dividing header">Dodati fajlovi</h5>
              <div class="two wide field"></div>
            </div>
          </div>
          <!-- FILE ATTACHMENT FIELD -->
          <div class="fields">
            <div class="two wide field"></div>
            <div class="twelve wide field">
              <% for(doc of attachedDocs) { %>
                <div class="ui red inverted large label"><%= doc.Opis %></div>
              <% } %>
            </div>
            <div class="two wide field"></div>
          </div>
          <!-- END OF FILE ATTACHMENT FIELD -->

          <div class="fields">
            <div class="two wide field"></div>
            <div class="twelve wide field">
              <a id="getBack" class="ui right floated black button">Nazad</a> <!-- inverted -->
            </div>
          </div>
        </form>
      </div>
    </div>
    <script type="text/javascript">
      $(document).ready(() => {
        document.getElementById('getBack').addEventListener('click', (e) => {
          window.history.go(-1);
        });

        $('#ticketType option:not(:selected)').prop('disabled', true);
        $('#ticketPriority option:not(:selected)').prop('disabled', true);
        $('#ticketStatus option:not(:selected)').prop('disabled', true);
        
        $('select.dropdown').dropdown();
      });
    </script>
  </body>
</html>